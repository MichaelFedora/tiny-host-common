(self.webpackChunktiny_host_common=self.webpackChunktiny_host_common||[]).push([[89],{89:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"content",attrs:{id:"tiny-home"}},[t("h1",[e._v("home - "+e._s(e.username))]),e._v(" "),t("div",[t("router-link",{staticClass:"button info",attrs:{to:"/sessions"}},[t("span",[e._v("Manage Sessions")])]),e._v(" "),t("button",{staticClass:"warning",on:{click:e.changePass}},[t("span",[e._v("Change Password")])]),e._v(" "),t("button",{staticClass:"danger",on:{click:e.deleteSelf}},[t("span",[e._v("Delete Account")])]),e._v(" "),t("button",{staticClass:"primary",on:{click:e.logout}},[t("span",[e._v("Logout")])])],1)])};a._withStripped=!0;var n=t(271),o=t(79),i=t(517),r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("transition",{attrs:{name:"fade"}},[e.active?t("div",{staticClass:"change-pass-modal modal is-active",attrs:{role:"dialog","aria-modal":"modal"}},[t("div",{staticClass:"modal-background",on:{click:function(s){return e.cancel()}}}),e._v(" "),t("div",{staticClass:"modal-card"},[t("header",[t("span",[e._v("Change Password")])]),e._v(" "),t("section",[t("div",{staticClass:"field"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],ref:"pass",attrs:{type:"password",required:"",placeholder:"old password"},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}}),e._v(" "),t("span",{staticClass:"error"},[e._v(e._s(""===e.password?"required":""))])]),e._v(" "),t("div",{staticClass:"field"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newpass,expression:"newpass"}],attrs:{type:"password",required:"",placeholder:"new passwprd"},domProps:{value:e.newpass},on:{keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.confirm()},input:function(s){s.target.composing||(e.newpass=s.target.value)}}}),e._v(" "),t("span",{staticClass:"error"},[e._v(e._s(null!=e.newpass?""===e.newpass?"required":e.newpass.length<4?"at least 4 characters":"":""))])])]),e._v(" "),t("footer",[t("button",{on:{click:e.cancel}},[e._v("cancel")]),e._v(" "),t("button",{staticClass:"warning",attrs:{disabled:!e.password||!e.newpass},on:{click:e.confirm}},[e._v("confirm")])])])]):e._e()])};r._withStripped=!0;const c={name:"tiny-change-pass-modal",data:()=>({active:!1,password:void 0,newpass:void 0}),mounted(){this.active=!0,this.$nextTick((()=>{var e;return null===(e=this.$refs.pass)||void 0===e?void 0:e.focus()})),window.addEventListener("keyup",this.onKey)},destroyed(){window.removeEventListener("keyup",this.onKey)},methods:{confirm(){this.active&&this.password&&this.newpass&&!(this.newpass.length<4)&&(this.$emit("confirm",{password:this.password,newpass:this.newpass}),this.close())},cancel(){this.active&&(this.$emit("cancel"),this.close())},close(){this.active&&(this.active=!1,setTimeout((()=>{var e;this.$destroy(),void 0!==(e=this.$el).remove?e.remove():void 0!==e.parentNode&&null!==e.parentNode&&e.parentNode.removeChild(e)}),150))},onKey(e){this.active&&"Escape"===e.key&&this.cancel()}}};var l=t(900),d=(0,l.Z)(c,r,[],!1,null,null,null);d.options.__file="src/web/components/change-pass-modal.vue";const p=d.exports,u={name:"tiny-home",data(){var e;return{working:!1,username:(null===(e=n.Z.user)||void 0===e?void 0:e.username)||"???"}},mounted(){this.refresh()},methods:{async refresh(){this.working||(this.working=!0,this.working=!1)},async changePass(){const e=await(0,i.MO)(p);e&&await o.Z.auth.changePass(e.password,e.newpass).catch((()=>{}))},async logout(){await o.Z.auth.logout(),this.$router.push("/login")},async deleteSelf(){const e=await(0,i.h7)({title:"Delete Account",type:"danger",message:"Are you sure you want to delete your account? This cannot be undone.",prompt:{type:"password",placeholder:"password",required:!0}});e&&(await o.Z.deleteSelf(e).catch((()=>{})),this.$router.push("/login"))}}};var v=(0,l.Z)(u,a,[],!1,null,null,null);v.options.__file="src/web/pages/home.vue";const h=v.exports}}]);