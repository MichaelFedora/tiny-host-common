var f=Object.defineProperty,g=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var _=(e,s,a)=>s in e?f(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,v=(e,s)=>{for(var a in s||(s={}))y.call(s,a)&&_(e,a,s[a]);if(h)for(var a of h(s))w.call(s,a)&&_(e,a,s[a]);return e},k=(e,s)=>g(e,b(s));import{a as B,d as H,l as u,r as $}from"./index.4969d68a.js";import{d as A,c as C,H as j,o as E,J as F,h as c,i as n,t as i,F as N,E as R,A as d,g as p}from"./vendor.beb7d023.js";const S=A({setup(e,s){var l;const a=C(()=>String($.currentRoute.value.query.handshake)),t=j({working:!1,username:((l=H.user)==null?void 0:l.username)||"{current user}",app:"",scopes:[]});return E(async()=>{if(!a.value)return;t.working=!0;const o=await u.auth.getHandshakeInfo(a.value).catch(()=>null);t.app=(o==null?void 0:o.app)||"{broken}",t.scopes=(o==null?void 0:o.scopes)||[],t.working=!1}),k(v({handshake:a},F(t)),{cancel(){u.auth.cancelHandshake(a.value)},approve(){a.value&&t.app&&u.auth.approveHandshake(a.value)}})}}),V={id:"tiny-handshake"},q=n("h1",null,"handshake",-1),D={class:"sub"},J=d(" scopes:"),L=n("br",null,null,-1),M=d("Authenticate as "),T=d(" with these scopes?"),x=n("hr",null,null,-1),z={id:"buttons"};function G(e,s,a,t,l,o){return p(),c("div",V,[q,n("h2",D,i(e.app),1),n("p",null,[J,L,n("ul",null,[(p(!0),c(N,null,R(e.scopes,(r,m)=>(p(),c("li",{key:"filescope-"+m},i(r),1))),128))])]),n("p",null,[M,n("b",null,i(e.username),1),T]),x,n("div",z,[n("button",{onClick:s[0]||(s[0]=(...r)=>e.cancel&&e.cancel(...r))},"cancel"),n("button",{class:"primary",onClick:s[1]||(s[1]=(...r)=>e.approve&&e.approve(...r))},"approve")])])}var Q=B(S,[["render",G]]);export{Q as default};
